<!DOCTYPE html>
<html>
<head>
    <title>Coliru View2</title>
    <script src="lib/codemirror.js"></script>
    <link rel="stylesheet" href="lib/codemirror.css">
    <link rel="stylesheet" href="theme/ambiance.css">
    <script src="mode/clike/clike.js"></script>
    <style>
        * {
            padding: 0;
            margin: 0;
        }
        body {
            position: relative;
            height: 100%;
            width: 100%;
        }
        .CodeMirror {
            position: relative;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body>
</body>
<script>
    window.program = "#include <fstream>\n#include <future>\n#include <iostream>\n#include <sstream>\n#include <cstring>\n\n\nstd::string read_file(const char *filename)\n{\n    std::ifstream in(filename, std::ios::in | std::ios::binary);\n    if (!in)\n    {\n        std::stringstream ss;\n        ss << \"Failed to open file \\\"\" << filename << \"\\\". Reason: \" << strerror(errno) << \".\";\n        throw std::runtime_error(ss.str());  \n    }\n    \n    std::string contents;\n    in.seekg(0, std::ios::end);\n    contents.resize(in.tellg());\n    in.seekg(0, std::ios::beg);\n    in.read(&contents[0], contents.size());\n    in.close();\n    return contents;\n}\n\n\nvoid test()\n{\n    std::cout << std::async(read_file, \"bla bla bla\").get() << std::endl;\n}\n\n\nint main()\n{\n    try\n    {\n        test();\n    }\n    catch (const std::exception& exc)\n    {\n        std::cout << exc.what() << std::endl;\n    }\n}\n";
    window.ta = document.getElementById('src');

    window.onload = function() {
        window.myCodeMirror = CodeMirror(document.body, {
            value: program,
            mode:  "mode/clike",
            theme: "ambiance"
        });


    }
</script>
</html>