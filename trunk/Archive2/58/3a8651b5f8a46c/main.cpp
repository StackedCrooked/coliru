struct Foo
{
   typedef decltype(*this) self;
};