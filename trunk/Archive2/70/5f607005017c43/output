; ModuleID = 'main.cpp'
target datalayout = "e-p:64:64:64-i1:8:8-i8:8:8-i16:16:16-i32:32:32-i64:64:64-f32:32:32-f64:64:64-v64:64:64-v128:128:128-a0:0:64-s0:64:64-f80:128:128-n8:16:32:64-S128"
target triple = "x86_64-unknown-linux-gnu"

%struct.Base = type { %struct.BaseVTableLayout* }
%struct.BaseVTableLayout = type { {}* }

@_ZL13DerivedVTable = internal constant { void (%struct.Base*)* } { void (%struct.Base*)* @_Z19Derived_virtualCallP4Base }, align 8
@str = private unnamed_addr constant [14 x i8] c"Hello, World!\00"

; Function Attrs: nounwind uwtable
define void @_Z19Derived_virtualCallP4Base(%struct.Base* nocapture readnone) #0 {
  %puts = tail call i32 @puts(i8* getelementptr inbounds ([14 x i8]* @str, i64 0, i64 0))
  ret void
}

; Function Attrs: uwtable
define void @_Z9inlinableP4Base(%struct.Base* %b) #1 {
  %1 = getelementptr inbounds %struct.Base* %b, i64 0, i32 0
  %2 = load %struct.BaseVTableLayout** %1, align 8, !tbaa !1
  %3 = bitcast %struct.BaseVTableLayout* %2 to void (%struct.Base*)**
  %4 = load void (%struct.Base*)** %3, align 8, !tbaa !6
  tail call void %4(%struct.Base* %b)
  ret void
}

; Function Attrs: uwtable
define void @_Z4funcv() #1 {
  %d = alloca %struct.Base, align 8
  %1 = getelementptr inbounds %struct.Base* %d, i64 0, i32 0
  store %struct.BaseVTableLayout* bitcast ({ void (%struct.Base*)* }* @_ZL13DerivedVTable to %struct.BaseVTableLayout*), %struct.BaseVTableLayout** %1, align 8, !tbaa !1
  %puts.i = call i32 @puts(i8* getelementptr inbounds ([14 x i8]* @str, i64 0, i64 0)) #3
  call void @_Z6opaqueP4Base(%struct.Base* %d)
  %2 = load %struct.BaseVTableLayout** %1, align 8, !tbaa !1
  %3 = bitcast %struct.BaseVTableLayout* %2 to void (%struct.Base*)**
  %4 = load void (%struct.Base*)** %3, align 8, !tbaa !6
  call void %4(%struct.Base* %d)
  ret void
}

declare void @_Z6opaqueP4Base(%struct.Base*) #2

; Function Attrs: nounwind
declare i32 @puts(i8* nocapture readonly) #3

attributes #0 = { nounwind uwtable "less-precise-fpmad"="false" "no-frame-pointer-elim"="false" "no-infs-fp-math"="false" "no-nans-fp-math"="false" "stack-protector-buffer-size"="8" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #1 = { uwtable "less-precise-fpmad"="false" "no-frame-pointer-elim"="false" "no-infs-fp-math"="false" "no-nans-fp-math"="false" "stack-protector-buffer-size"="8" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #2 = { "less-precise-fpmad"="false" "no-frame-pointer-elim"="false" "no-infs-fp-math"="false" "no-nans-fp-math"="false" "stack-protector-buffer-size"="8" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #3 = { nounwind }

!llvm.ident = !{!0}

!0 = metadata !{metadata !"clang version 3.4 (tags/RELEASE_34/final 206911)"}
!1 = metadata !{metadata !2, metadata !3, i64 0}
!2 = metadata !{metadata !"_ZTS4Base", metadata !3, i64 0}
!3 = metadata !{metadata !"any pointer", metadata !4, i64 0}
!4 = metadata !{metadata !"omnipotent char", metadata !5, i64 0}
!5 = metadata !{metadata !"Simple C/C++ TBAA"}
!6 = metadata !{metadata !7, metadata !3, i64 0}
!7 = metadata !{metadata !"_ZTS16BaseVTableLayout", metadata !3, i64 0}
