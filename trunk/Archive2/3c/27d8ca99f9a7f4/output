In file included from main.cpp:44:
In file included from /usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/numeric:62:
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/stl_numeric.h:126:22: error: invalid operands to binary expression ('any_iterator<int, std::input_iterator_tag>' and 'any_iterator<int, std::input_iterator_tag>')
      for (; __first != __last; ++__first)
             ~~~~~~~ ^  ~~~~~~
main.cpp:48:17: note: in instantiation of function template specialization 'std::accumulate<any_iterator<int, std::input_iterator_tag>, int>' requested here
    return std::accumulate(begin, end, 0);
                ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/stl_iterator.h:304:5: note: candidate template ignored: could not match 'reverse_iterator' against 'any_iterator'
    operator!=(const reverse_iterator<_Iterator>& __x,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/stl_iterator.h:354:5: note: candidate template ignored: could not match 'reverse_iterator' against 'any_iterator'
    operator!=(const reverse_iterator<_IteratorL>& __x,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/stl_iterator.h:1060:5: note: candidate template ignored: could not match 'move_iterator' against 'any_iterator'
    operator!=(const move_iterator<_IteratorL>& __x,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/stl_iterator.h:1066:5: note: candidate template ignored: could not match 'move_iterator' against 'any_iterator'
    operator!=(const move_iterator<_Iterator>& __x,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/postypes.h:221:5: note: candidate template ignored: could not match 'fpos' against 'any_iterator'
    operator!=(const fpos<_StateT>& __lhs, const fpos<_StateT>& __rhs)
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/stl_pair.h:227:5: note: candidate template ignored: could not match 'pair' against 'any_iterator'
    operator!=(const pair<_T1, _T2>& __x, const pair<_T1, _T2>& __y)
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/allocator.h:138:5: note: candidate template ignored: could not match 'allocator' against 'any_iterator'
    operator!=(const allocator<_T1>&, const allocator<_T2>&)
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/allocator.h:143:5: note: candidate template ignored: could not match 'allocator' against 'any_iterator'
    operator!=(const allocator<_Tp>&, const allocator<_Tp>&)
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/basic_string.h:2551:5: note: candidate template ignored: could not match 'basic_string' against 'any_iterator'
    operator!=(const basic_string<_CharT, _Traits, _Alloc>& __lhs,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/basic_string.h:2563:5: note: candidate template ignored: could not match 'const _CharT *' against 'any_iterator<int, std::input_iterator_tag>'
    operator!=(const _CharT* __lhs,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/basic_string.h:2575:5: note: candidate template ignored: could not match 'basic_string' against 'any_iterator'
    operator!=(const basic_string<_CharT, _Traits, _Alloc>& __lhs,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/streambuf_iterator.h:210:5: note: candidate template ignored: could not match 'istreambuf_iterator' against 'any_iterator'
    operator!=(const istreambuf_iterator<_CharT, _Traits>& __a,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/stream_iterator.h:137:5: note: candidate template ignored: could not match 'istream_iterator' against 'any_iterator'
    operator!=(const istream_iterator<_Tp, _CharT, _Traits, _Dist>& __x,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/array:237:5: note: candidate template ignored: could not match 'array' against 'any_iterator'
    operator!=(const array<_Tp, _Nm>& __one, const array<_Tp, _Nm>& __two)
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/tuple:868:5: note: candidate template ignored: could not match 'tuple' against 'any_iterator'
    operator!=(const tuple<_TElements...>& __t,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/functional:2523:5: note: candidate template ignored: could not match 'function' against 'any_iterator'
    operator!=(const function<_Res(_Args...)>& __f, nullptr_t) noexcept
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/functional:2529:5: note: candidate template ignored: could not match 'function' against 'any_iterator'
    operator!=(nullptr_t, const function<_Res(_Args...)>& __f) noexcept
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:641:5: note: candidate template ignored: could not match 'unique_ptr' against 'any_iterator'
    operator!=(const unique_ptr<_Tp, _Dp>& __x,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:647:5: note: candidate template ignored: could not match 'unique_ptr' against 'any_iterator'
    operator!=(const unique_ptr<_Tp, _Dp>& __x, nullptr_t) noexcept
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:652:5: note: candidate template ignored: could not match 'unique_ptr' against 'any_iterator'
    operator!=(nullptr_t, const unique_ptr<_Tp, _Dp>& __x) noexcept
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/shared_ptr_base.h:1198:5: note: candidate template ignored: could not match '__shared_ptr' against 'any_iterator'
    operator!=(const __shared_ptr<_Tp1, _Lp>& __a,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/shared_ptr_base.h:1204:5: note: candidate template ignored: could not match '__shared_ptr' against 'any_iterator'
    operator!=(const __shared_ptr<_Tp, _Lp>& __a, nullptr_t) noexcept
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/shared_ptr_base.h:1209:5: note: candidate template ignored: could not match '__shared_ptr' against 'any_iterator'
    operator!=(nullptr_t, const __shared_ptr<_Tp, _Lp>& __a) noexcept
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/shared_ptr.h:349:5: note: candidate template ignored: could not match 'shared_ptr' against 'any_iterator'
    operator!=(const shared_ptr<_Tp1>& __a,
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/shared_ptr.h:355:5: note: candidate template ignored: could not match 'shared_ptr' against 'any_iterator'
    operator!=(const shared_ptr<_Tp>& __a, nullptr_t) noexcept
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/shared_ptr.h:360:5: note: candidate template ignored: could not match 'shared_ptr' against 'any_iterator'
    operator!=(nullptr_t, const shared_ptr<_Tp>& __a) noexcept
    ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/stl_vector.h:1535:5: note: candidate template ignored: could not match 'vector' against 'any_iterator'
    operator!=(const vector<_Tp, _Alloc>& __x, const vector<_Tp, _Alloc>& __y)
    ^
main.cpp:32:29: error: only virtual member functions can be marked 'override'
        base* clone() const override {
                            ^~~~~~~~~
main.cpp:11:19: note: in instantiation of template class 'any_iterator<int, std::input_iterator_tag>::derived<__gnu_cxx::__normal_iterator<int *, std::vector<int, std::allocator<int> > > >' requested here
        : ptr(new derived<I>(std::move(iterator))) { }
                  ^
main.cpp:53:20: note: in instantiation of function template specialization 'any_iterator<int, std::input_iterator_tag>::any_iterator<__gnu_cxx::__normal_iterator<int *, std::vector<int, std::allocator<int> > > >' requested here
    std::cout << f(xs.begin(), xs.end());
                   ^
main.cpp:11:11: error: no matching constructor for initialization of 'std::unique_ptr<base>'
        : ptr(new derived<I>(std::move(iterator))) { }
          ^   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.cpp:53:20: note: in instantiation of function template specialization 'any_iterator<int, std::input_iterator_tag>::any_iterator<__gnu_cxx::__normal_iterator<int *, std::vector<int, std::allocator<int> > > >' requested here
    std::cout << f(xs.begin(), xs.end());
                   ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:169:7: note: candidate constructor not viable: no known conversion from 'derived<__gnu_cxx::__normal_iterator<int *, std::vector<int, std::allocator<int> > > > *' to 'pointer' (aka 'any_iterator<int, std::input_iterator_tag>::base *') for 1st argument
      unique_ptr(pointer __p) noexcept
      ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:200:17: note: candidate constructor not viable: no known conversion from 'derived<__gnu_cxx::__normal_iterator<int *, std::vector<int, std::allocator<int> > > > *' to 'nullptr_t' for 1st argument
      constexpr unique_ptr(nullptr_t) noexcept : unique_ptr() { }
                ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:205:7: note: candidate constructor not viable: no known conversion from 'derived<__gnu_cxx::__normal_iterator<int *, std::vector<int, std::allocator<int> > > > *' to 'std::unique_ptr<any_iterator<int, std::input_iterator_tag>::base, std::default_delete<any_iterator<int, std::input_iterator_tag>::base> >' for 1st argument
      unique_ptr(unique_ptr&& __u) noexcept
      ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:356:7: note: candidate constructor not viable: no known conversion from 'derived<__gnu_cxx::__normal_iterator<int *, std::vector<int, std::allocator<int> > > > *' to 'const std::unique_ptr<any_iterator<int, std::input_iterator_tag>::base, std::default_delete<any_iterator<int, std::input_iterator_tag>::base> >' for 1st argument
      unique_ptr(const unique_ptr&) = delete;
      ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:220:2: note: candidate template ignored: could not match 'unique_ptr<type-parameter-0-0, type-parameter-0-1>' against 'any_iterator<int, std::input_iterator_tag>::derived<__gnu_cxx::__normal_iterator<int *, std::vector<int, std::allocator<int> > > > *'
        unique_ptr(unique_ptr<_Up, _Ep>&& __u) noexcept
        ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:228:2: note: candidate template ignored: could not match 'auto_ptr<type-parameter-0-0>' against 'any_iterator<int, std::input_iterator_tag>::derived<__gnu_cxx::__normal_iterator<int *, std::vector<int, std::allocator<int> > > > *'
        unique_ptr(auto_ptr<_Up>&& __u) noexcept;
        ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:157:17: note: candidate constructor not viable: requires 0 arguments, but 1 was provided
      constexpr unique_ptr() noexcept
                ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:181:7: note: candidate constructor not viable: requires 2 arguments, but 1 was provided
      unique_ptr(pointer __p,
      ^
/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.9.2/../../../../include/c++/4.9.2/bits/unique_ptr.h:193:7: note: candidate constructor not viable: requires 2 arguments, but 1 was provided
      unique_ptr(pointer __p,
      ^
3 errors generated.
