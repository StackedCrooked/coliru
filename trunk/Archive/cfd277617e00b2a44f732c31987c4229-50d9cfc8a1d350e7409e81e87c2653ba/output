+ g++-4.8 -std=c++11 -O2 -pthread main.cpp
main.cpp:2:29: error: 'data' was not declared in this scope
     auto func() -> decltype(data) {}
                             ^
main.cpp:2:29: error: 'data' was not declared in this scope
main.cpp: In function 'int main()':
main.cpp:10:7: error: 'struct test' has no member named 'func'
     t.func();
       ^
