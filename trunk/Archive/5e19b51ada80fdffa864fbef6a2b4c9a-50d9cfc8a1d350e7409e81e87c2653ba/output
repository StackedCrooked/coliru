main.cpp:23:49: error: invalid use of incomplete type ‘struct optional_delete<TDx>’
 void optional_delete<TDx>::operator()( T* ptr ) const {
                                                 ^
main.cpp:5:8: error: declaration of ‘struct optional_delete<TDx>’
 struct optional_delete {
        ^
