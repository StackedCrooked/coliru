module Standard {
    module Algorithm {
        ForEach(fun) {
            return function(range)[fun := Utility.Move(fun)] {
                var := range();
                while(var) {
                    fun(*Utility.Move(var));
                    var = range();
                }
            };
        }
    }
}