module Standard {
    module Algorithm {
        Map(fun) {
            return function(range)[fun := move(fun)] {
                return function()[range := move(range), fun := move(fun)] {
                     var := range();
                     if (var) return Containers.Optional(decltype(fun(*move(var))).decay)(fun(*move(var)));
                     return Containers.None;
                };
            };
        }
    }
}